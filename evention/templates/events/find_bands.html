{% extends "base.html" %}

{% block content %}

<div class="col-sm-12 col-md-6">
  <h2>Your favourite artists</h2>
  <p data-bind="visible: favouriteBands().length == 0">Looks like there's nothing here... find your favourite musical acts and add them!</p>
  <ul data-bind="foreach: favouriteBands, visible: favouriteBands().length > 0" class="list-group">
    <li class="list-group-item">
      <p data-bind="text: name"></p>
      <p><a data-bind="click: $parent.unlikeBand.bind($parent, '{{ request.user.id }}')" href="#">Remove from my list.</a></p>
    </li>

  </ul>
</div>

<div class="col-sm-12 col-md-6">
  <h2>What <span data-bind="visible: favouriteBands().length > 0">other </span>artists do you like?</h2>
  <div>
    <input id="band-search" class="form-control" data-bind="textInput: bandSearch" placeholder="Start typing..." />
    <p>Search powered by <a href="https://spotify.com" target="_blank">Spotify</a>.</p>
  </div>

  <div data-bind="foreach: bandResults, visible: bandResults().length > 0">
    <div data-bind="visible: disliked" class="media">
      <div class="media-left media-middle">
        <img width="200px" data-bind="attr:{src: image}" class="media-object">
      </div>
      <div class="media-body">
        <h4 data-bind="text: name" class="media-heading"></h4>
        <p><a data-bind="click: $parent.likeBand.bind($parent, '{{ request.user.id }}')" href="#">Add to my list.</a></p>
      </div>
    </div>
  </div>
</div>

<script>
  $(document).ready(function(){
    $("#band-search").focus(); // Start typing right away.
  });

  $('#band-search').submit(function(event) {
    event.preventDefault();
  });
</script>

{% endblock %}
